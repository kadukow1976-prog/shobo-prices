<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Узнать стоимость ремонта — УграРемКом</title>
  <style>
    :root {
      --bg:#f6f7f9; --card:#fff; --text:#1f2328; --muted:#6b7280; --brand:#007aff;
      --line:#e5e7eb;
    }
    * {box-sizing:border-box}
    body {
      margin:0; font-family:sans-serif; background:var(--bg); color:var(--text);
      display:flex; justify-content:center; padding:20px;
    }
    .wrap {max-width:860px; width:100%; background:var(--card); padding:20px; border-radius:12px; box-shadow:0 2px 8px rgba(0,0,0,.08);}
    h1 {font-size:22px; margin:0 0 16px; text-align:center;}
    .panel {display:flex; gap:12px; margin-bottom:16px;}
    .input {flex:1; padding:12px; font-size:16px; border:1px solid var(--line); border-radius:8px;}
    .btn-call {
      background:var(--brand); color:#fff; text-decoration:none;
      padding:12px 20px; border-radius:8px; font-weight:600; text-align:center;
    }
    .btn-call:hover {background:#005fcc;}
    table {width:100%; border-collapse:collapse;}
    th,td {padding:10px; border-bottom:1px solid var(--line); text-align:left;}
    th {background:#f0f0f0;}
    .counter {margin-top:10px; font-size:14px; color:var(--muted);}
  </style>
</head>
<body>
<div class="wrap">
  <h1>Стоимость ремонта</h1>

  <div class="panel">
    <input type="text" id="search" class="input" placeholder="Введите неисправность...">
    <a href="tel:+79107116072" class="btn-call">Позвонить</a>
  </div>

  <table id="table">
    <thead><tr><th>Неисправность</th><th>Цена</th></tr></thead>
    <tbody></tbody>
  </table>

  <div class="counter" id="counter">Найдено: 0</div>
</div>

<script>
// <<< ВАЖНО: твоя ссылка на CSV >>>
const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQBjrIZhXqFtutZJChMn-zej9fqm679V6aMTW6pXqF19PivgbeYIO0mL_UiNx3WryYzyFxOcDwpPYh/pub?gid=0&single=true&output=csv";

// Нормализация текста
const norm = s => s.toString().toLowerCase().trim();

// Парсер CSV
function parseCSV(txt){
  return txt.trim().split(/\r?\n/).map(r=>r.split(',').map(c=>c.trim()));
}

async function loadData(){
  let res = await fetch(CSV_URL);
  let txt = await res.text();
  let rows = parseCSV(txt);
  let header = rows.shift();
  let data = rows.map(r=>({name:r[0], price:r[1]}));
  return data;
}

function render(data, q=""){
  const tbody = document.querySelector("#table tbody");
  tbody.innerHTML = "";
  let shown = 0;
  data.forEach(r=>{
    if(!q || norm(r.name).includes(norm(q))){
      let tr = document.createElement("tr");
      tr.innerHTML = `<td>${r.name}</td><td>${r.price}</td>`;
      tbody.appendChild(tr);
      shown++;
    }
  });
  document.getElementById("counter").textContent = "Найдено: " + shown;
}

(async()=>{
  const data = await loadData();
  render(data);
  document.getElementById("search").addEventListener("input", e=>{
    render(data, e.target.value);
  });
})();
</script>
</body>
</html>
